!function(t,e){t.widget("ui.rlightbox",{options:{animationSpeed:"fast",setPrefix:"lb",showMap:!0,counterDelimiter:" / ",videoWidth:640,videoHeight:385,errorMessage:"Oh dear! Something went wrong! If the problem still appears let the pageâ€™s admin know. Would you like to try again or reject the content?",againButtonLabel:"Try again",rejectButtonLabel:"Reject this content",overwriteTitle:!1,keys:{next:[78,39],previous:[80,37],close:[67,27],panorama:[90,null]},loop:!1},_create:function(){var e,i=t.ui.rlightbox.global,o=this;i.getLightbox(),e=i.extractAnchor(this),void 0!==e.type&&(i.addToSet(e),this.element.click(function(t){i.open(o),t.preventDefault()}))},_setOption:function(t,e){}}),t.extend(t.ui.rlightbox,{global:{addToSet:function(e){var i=this.getSetName(e.self),o=t.ui.rlightbox.global.sets,n=e.self.options,a=n.setPrefix,r="."+a+"_"+i,h=t(r).index(e.element);o[i]?o[i].splice(h,0,e):(o[i]=[],o[i].push(e))},checkButtonsState:function(){var t=this.data,e=this.$lightbox,i=t.currentSet,o=t.totalElementsNumber,n=t.currentElementNumber,a=t.currentSetElement.self.options.loop;"single"===i||1===o?this.setButtonState("disabled"):1===n&&!1===a?(this.setButtonState("disabled",e.prev),this.setButtonState("default",e.next)):n===o&&!1===a?(this.setButtonState("disabled",e.next),this.setButtonState("default",e.prev)):this.setButtonState("default")},checkMinimalSize:function(t,e){var i=this.data,o=i.minimalLightboxSize,n=o.width,a=o.height;return"width"===t?e<n?n:e:"height"===t?e<a?a:e:void 0},closeLightbox:function(){var e=this.data,i=this.$lightbox;e.ready&&(i.overlay.add(i.root).add(i.header).hide(),t("body").css("overflow","visible"),i.content.empty().width(20).height(20),this.hideArrow(),this.setButtonState("default"),this.panoramaHideIcon(),e.currentElementNumber=null,e.totalElementsNumber=null,i.title.empty(),this.panoramaHideMap(),e.ready=!1)},createStructure:function(){var e=this.data;t(e.htmlLightbox).appendTo("body").after(e.htmlMap).after(e.htmlOverlay)},destroy:function(){this.data.currentSetElement.element.unbind(".rlightbox").unbind("click").removeData("rlightbox")},extractAnchor:function(e){var i={type:void 0},o=t(e.element),n=o.attr("href"),a={youtube:{urls:[/(http:\/\/www\.youtube\.com\/watch\?v=([\w-_]+))&?/],type:"youtube"},image:{urls:[/.jpg$|.png$|.gif$/],type:"image"},vimeo:{urls:[/(http:\/\/vimeo\.com\/groups\/\w+\/videos\/(\w+))&?/,/(http:\/\/vimeo\.com\/(\w+))&?/],type:"vimeo"},flash:{urls:[/.swf/],type:"flash"}};return t.each(a,function(a,r){var h=!1;if(t.each(r.urls,function(t,a){var s=a.exec(n);if(null!==s)return i={url:s[1],id:s[2],type:r.type,element:o,self:e},("image"===r.type||"flash"===r.type||e.options.overwriteTitle)&&(i.title=o.attr("title"),i.url=n),h=!0,!1}),h)return!1}),i},getAvailableScreenSize:function(){var t=this.data,e=t.lightboxPadding;return{width:this.getWindowSize("width")-e,height:this.getWindowSize("height")-t.headerHeight-e}},getCurrentElementNumber:function(e){var i,o=this.data,n=this.sets,a=n[o.currentSet];return t.each(a,function(o,n){if(t(e).get(0)===n.element.get(0))return i=o+1,!1}),i},getImageStatus:function(t,e){var i,o,n=this.data,a=n.currentSetElement,r=this.getWindowSize("width"),h=this.getWindowSize("height"),s=n.minimalLightboxSize.width,l=n.minimalLightboxSize.height,u=(a.width,a.height,n.lightboxPadding),d=n.headerHeight;return i=t<=s?-1:t>s&&t+u<=r?1:2,o=e<=l?-1:e>l&&h>=e+u+d?1:2,{statusWidth:i,statusHeight:o}},getLightbox:function(){var e=this.data,i=this.$lightbox,o=this;i.root||(this.createStructure(),this.setReferences(),i.close.add(i.overlay).click(t.proxy(this.closeLightbox,this)),i.next.click(t.proxy(this.next,this)),i.prev.click(t.proxy(this.prev,this)),i.next.add(i.prev).add(i.next).add(i.close).hover(function(){t(this).is(":not(.ui-state-disabled)")&&o.setButtonState("highlight",t(this))},function(){t(this).is(":not(.ui-state-disabled)")&&o.setButtonState("default",t(this))}),i.contentContainer.mousemove(t.proxy(this.showArrow,this)).mousemove(t.proxy(this.checkSide,this)).mousemove(t.proxy(this.setCursor,this)).click(function(){"left"===e.side?o.prev.apply(o):"right"===e.side&&o.next.apply(o)}).mousedown(t.proxy(this.panoramaStart,this)).mouseup(t.proxy(this.panoramaStop,this)).mouseleave(function(){o.hideArrow.apply(o),e.side=""}),i.panoramaIcon.click(t.proxy(this.panoramaToggle,this)).hover(t.proxy(this.panoramaHighlight,this)),t(window).bind("resize.rlightbox",t.proxy(this.liveResize,this)),t(document).keyup(t.proxy(this.handleKeyboard,this)))},getOptimalSize:function(t,e){var i=this.data,o=i.minimalLightboxSize,n=o.width,a=o.height,r=this.getAvailableScreenSize(),h=r.width,s=r.height;return"width"===t?e<n?n:e>h?h:e:"height"===t?e<a?a:e>s?s:e:void 0},getParam:function(t,e){var i,o="[\\?&]"+t+"=(\\w+)";return i=new RegExp(o).exec(e),null!==i?i[1]:null},getSetName:function(e){var i=t(e.element).attr("class"),o=e.options.setPrefix+"_",n=new RegExp(o+"([\\w-_]+)"),a=n.exec(i);return a?a[1]:"single"},checkSide:function(t){var e=this.data,i=this.$lightbox,o=i.contentContainer,n=t.pageX-o.offset().left,a=Math.round(o.width()/2);e.currentElementNumber,e.totalElementsNumber;n<=a?e.side="left":n>a&&(e.side="right"),t.preventDefault()},getSizes:function(){function t(u,c){e=d.getImageStatus(u,c),i=e.statusWidth,o=e.statusHeight,1!==i&&-1!==i||2===o||1!==o&&-1!==o||2===i?2!==i&&2!==o||(1===i||-1===i?(h=p-w-f,a=h,s=h/c,-1===i?(r=m,n=Math.ceil(u*s)):(r=Math.ceil(u*s)-f,(n=r)<=m&&t(n,a))):1===o||-1===o?(r=g-f,n=r,l=r/u,-1===o?(h=b,a=Math.ceil(c*l)):(h=Math.ceil(c*l)-w-f,(a=h)<=b&&t(n,a))):u>c?(r=g-f,n=r,l=r/u,h=Math.ceil(c*l)-f-w,((a=h)<=b||h+f+w>p)&&t(n,a)):(h=p-w-f,a=h,s=h/c,r=Math.ceil(u*s)-f,((n=r)<=m||r>g)&&t(n,a))):(1===i?r=u:-1===i&&(r=m),n=u,1===o?h=c:-1===o&&(h=b),a=c)}var e,i,o,n,a,r,h,s,l,u=(this.$lightbox,this.data),d=this,c=u.currentSetElement,g=this.getWindowSize("width"),p=this.getWindowSize("height"),m=u.minimalLightboxSize.width,b=u.minimalLightboxSize.height,x=c.width,v=c.height,f=u.lightboxPadding,w=u.headerHeight;return t(x,v),{imageTargetWidth:n,imageTargetHeight:a,lightboxTargetWidth:r,lightboxTargetHeight:h,statusWidth:i,statusHeight:o}},getWindowSize:function(e){var i=this.data,o=t(window).width(),n=t(window).height(),a=i.minimalLightboxSize,r=i.lightboxPadding,h=i.headerHeight,s=a.width+r,l=a.height+r+h;return"width"===e?o<s?s:o:n<l?l:n},handleKeyboard:function(t){var e=this.data,i=e.currentSetElement,o=i.self.options,n=o.keys,a=t.which;!1!==e.ready&&(a===n.next[0]||a===n.next[1]?this.next():a===n.previous[0]||a===n.previous[1]?this.prev():a===n.close[0]||a===n.close[1]?this.closeLightbox():a!==n.panorama[0]&&a!==n.panorama[1]||"image"!==i.type||this.panoramaToggle(t))},hideArrow:function(){this.$lightbox.arrow.hide()},liveResize:function(){var t=this.data,e=(this.$lightbox,t.currentSetElement.type);t.ready&&!1===t.panoramaOn&&"image"===e?(this.queueResizeLightbox(),this.updateTitleWidth(),this.queueCenterContent(),this.panoramaCheckAvailability()):t.ready&&t.panoramaOn&&"image"===e?(this.queueCenterLightbox(),this.panoramaShrink(),this.panoramaCheckAvailability()):t.ready&&"image"!==e&&this.queueCenterLightbox()},loadContentFlash:function(e){function i(){o=s.getParam("width",e),n=s.getParam("height",e),(null===o||isNaN(o))&&(o=g.videoWidth),(null===n||isNaN(n))&&(n=g.videoHeight),c.width=o,c.height=n,d=s.replaceHtmlPatterns(d,{width:o,height:n,url:e}),a=t("<div></div>"),a.css({display:"none",width:o,height:n}),l.removeClass("ui-lightbox-loader").empty().append(d).children().wrap(a),u.resolve()}var o,n,a,r=this.data,h=this.$lightbox,s=this,l=h.content,u=t.Deferred(),d=r.htmlFlash,c=r.currentSetElement,g=c.self.options;return l.addClass("ui-lightbox-loader"),setTimeout(i,1e3),u.promise()},loadContentImage:function(e){var i=this.$lightbox,o=this.data,n=this,a=o.currentSetElement,r=t.Deferred(),h=t("<img />");return i.content.addClass("ui-lightbox-loader"),h.attr("src",e).bind("load",function(){t(this).unbind("load"),a.width=this.width,a.height=this.height,i.content.removeClass("ui-lightbox-loader").empty().append(this).children().hide(),r.resolve()}).error(function(){i.content.removeClass("ui-lightbox-loader"),n.showErrorMessage(),r.resolve()}).each(function(){if(this.complete||void 0===this.complete){var t=this.src;this.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",this.src=t}}),r.promise()},loadContentVimeo:function(e){var i=this.data,o=this.$lightbox,n=this,a=t.Deferred(),r=i.providers.vimeo,h=i.currentSetElement,s=h.self.options;i.minimalLightboxSize;return o.content.addClass("ui-lightbox-loader"),t.ajax({url:r,data:{url:e,maxwidth:s.videoWidth,maxheight:s.videoHeight},dataType:"jsonp",timeout:5e3}).success(function(t){o.content.removeClass("ui-lightbox-loader").empty().append(t.html).children().wrap("<div style='display: none'></div>").end().find("div:first").width(t.width).height(t.height),!1===s.overwriteTitle&&(h.title=t.title),h.width=t.width,h.height=t.height,a.resolve()}).error(function(){o.content.removeClass("ui-lightbox-loader"),n.showErrorMessage(),a.resolve()}),a.promise()},loadContentYoutube:function(e){function i(){a.content.removeClass("ui-lightbox-loader"),h.showErrorMessage(),s.resolve()}var o,n=this.data,a=this.$lightbox,r=a.content,h=this,s=t.Deferred(),l=n.providers.youtube,u=n.currentSetElement,d=u.self.options,c=(n.minimalLightboxSize,d.videoWidth),g=d.videoHeight,p=n.htmlYoutube;return a.content.addClass("ui-lightbox-loader"),t.ajax({url:l+u.id+"?callback=?",data:{v:2,alt:"jsonc",prettyprint:!0},dataType:"jsonp",timeout:5e3}).success(function(e){if(e.error)return void i();p=h.replaceHtmlPatterns(p,{width:c,height:g,url:u.id}),o=t("<div></div>"),o.css({display:"none",width:c,height:g}),r.removeClass("ui-lightbox-loader").empty().append(p).children().wrap(o),!1===d.overwriteTitle&&(u.title=e.data.title),u.width=c,u.height=g,s.resolve()}).error(function(){i()}),s.promise()},navigationGoToElement:function(t){var e=this.data,i=this.sets,o=this.$lightbox,n=e.currentSet;e.currentElementNumber=t,e.currentSetElement=i[n][t-1],this.setNextQueue(),o.queueContainer.next.dequeue("lightboxNext")},next:function(){var t=this.data,e=this.sets,i=this.$lightbox,o=t.ready,n=t.panoramaOn,a=t.currentSet,r=t.currentElementNumber,h=t.totalElementsNumber,s=t.currentSetElement.self.options,l=s.loop,u=!0;o&&"single"!==a&&!1===n&&(r+1<=h?t.currentElementNumber=r+=1:r+1>h&&l?t.currentElementNumber=r=1:u=!1,u&&(t.currentSetElement=e[a][r-1],this.setNextQueue(),i.queueContainer.next.dequeue("lightboxNext")))},open:function(e){var i=this.data,o=this.sets,n=this.$lightbox,a=e.element,r=this.getSetName(e);t(a).attr("href");i.currentSet=r,i.totalElementsNumber=o[r].length,i.currentElementNumber=this.getCurrentElementNumber(a),i.currentSetElement=o[r][i.currentElementNumber-1],this.setOpenQueue(),this.setNextQueue(),this.checkButtonsState(),n.queueContainer.open.dequeue("lightboxOpen")},panoramaCenterContent:function(){var t,e,i=this.data,o=this.$lightbox,n=i.currentSetElement,a=this.getAvailableScreenSize(),r=a.width,h=a.height,s=n.width,l=n.height,u=o.content,d=u.find("img");t=r<s?0:u.width()/2-d.width()/2,e=h<l?0:u.height()/2-d.height()/2,d.css({top:e,left:t})},panoramaCheckAvailability:function(){var t=this.data,e=t.currentSetElement,i=e.width,o=e.height,n=e.currentWidth,a=e.currentHeight;n<i||a<o?(this.panoramaShowIcon("expand"),t.enablePanorama=!0):(t.enablePanorama=!1,this.panoramaHideIcon())},panoramaExpand:function(t){var e=this.data,i=this.$lightbox,o=e.currentSetElement,n=o.self.options;e.panoramaOn=!0,"click"===t.type?this.panoramaShowIcon("shrink","-hover"):this.panoramaShowIcon("shrink"),i.content.css("overflow","hidden"),i.content.find("img").width(o.width).height(o.height),this.panoramaSetContentSize(),this.panoramaCenterContent(),this.queueCenterLightbox(),this.updateTitleWidth(),n.showMap&&this.panoramaShowMap(),this.hideArrow(),this.setCursor()},panoramaHideIcon:function(){var t=this.data;this.$lightbox.panoramaIcon.hide().removeClass("ui-lightbox-panorama-icon-expand ui-lightbox-panorama-icon-shrink"),t.panoramaOn=!1},panoramaHideMap:function(){var t=this.$lightbox;t.map.hide(),t.viewport.css({left:-1,top:-1})},panoramaHighlight:function(){var t,e=this.$lightbox;e.panoramaIcon.attr("class",function(e,i){return t=i.indexOf("-hover"),-1!==t?i.slice(0,t):i+"-hover"})},panoramaSetContentSize:function(){var t,e,i=this.data,o=this.$lightbox,n=i.currentSetElement,a=i.minimalLightboxSize,r=a.width,h=a.height,s=this.getAvailableScreenSize(),l=s.width,u=s.height,d=n.width,c=n.height;t=d>l?l:d<=r?r:d,e=c>u?u:c<=h?h:c,o.content.width(t).height(e)},panoramaShowIcon:function(t,e){var i=this.$lightbox,o=e||"",n="ui-lightbox-panorama-icon-"+t+o;i.panoramaIcon.show().removeClass().addClass(n)},panoramaShowMap:function(){var t,e,i,o,n,a,r=this.data,h=r.minimalLightboxSize,s=this.$lightbox,l=s.content,u=l.find("img"),d=u.width(),c=u.height(),g=r.currentSetElement,p=r.mapSize;i=p.width/g.width,o=p.height/g.height,n=d<h.width?d:l.width(),a=c<h.height?c:l.height(),t=Math.ceil(n*i),e=Math.ceil(a*o),s.viewport.width(t).height(e),s.map.show(),r.viewportRatio={width:i,height:o}},panoramaShrink:function(t){var e=this.data,i=this.$lightbox;e.panoramaOn=!1,t&&"click"===t.type?this.panoramaShowIcon("expand","-hover"):this.panoramaShowIcon("expand"),this.queueResizeLightbox(),this.queueCenterContent(),i.content.css("overflow","visible"),this.updateTitleWidth(),this.panoramaHideMap(),this.setCursor()},panoramaStart:function(t){var e=this.data;this.$lightbox;e.panoramaPosition={xStart:t.pageX,yStart:t.pageY},t.preventDefault()},panoramaStop:function(t){var e=this.data,i=this.$lightbox,o=-1*(t.pageX-e.panoramaPosition.xStart),n=-1*(t.pageY-e.panoramaPosition.yStart),a=i.content,r=e.viewportRatio;e.panoramaOn&&(a.scrollLeft(a.scrollLeft()+o).scrollTop(a.scrollTop()+n),i.viewport.css({left:a.scrollLeft()*r.width-1,top:a.scrollTop()*r.height-1})),t.stopPropagation()},panoramaToggle:function(t){var e=this.data,i=e.panoramaOn,o=e.enablePanorama;o&&!1===i?this.panoramaExpand(t):o&&i&&this.panoramaShrink(t)},prev:function(){var t=this.data,e=this.sets,i=this.$lightbox,o=t.ready,n=t.panoramaOn,a=t.currentSet,r=t.currentElementNumber,h=t.totalElementsNumber,s=t.currentSetElement.self.options,l=s.loop,u=!0;o&&"single"!==a&&!1===n&&(r-1>=1?t.currentElementNumber=r-=1:r-1<1&&l?t.currentElementNumber=r=h:u=!1,u&&(t.currentSetElement=e[a][r-1],this.setNextQueue(),i.queueContainer.next.dequeue("lightboxNext")))},removeSetElement:function(t){var e=this.data,i=this.sets,o=e.currentSet,n=e.totalElementsNumber;i[o].splice(t-1,1),1===n||"single"===o?(this.closeLightbox(),this.destroy()):(this.destroy(),e.totalElementsNumber=i[o].length,t===n?this.navigationGoToElement(t-1):this.navigationGoToElement(t))},replaceHtmlPatterns:function(e,i){return t.each(i,function(t,i){var o=new RegExp("{"+t+"}","g");e=e.replace(o,i)}),e},setButtonState:function(t,e){var i=this.$lightbox,o=e||i.controlButtons;switch(t){case"default":o.removeClass("ui-state-highlight ui-state-disabled");break;case"highlight":o.addClass("ui-state-highlight");break;case"disabled":o.addClass("ui-state-disabled")}},setCursor:function(t){var e=this.data,i=this.$lightbox,o=i.contentContainer,n=e.currentSet,a=e.currentSetElement,r=e.currentSetElement.type,h=e.totalElementsNumber,s=e.currentElementNumber,l=e.side,u=e.panoramaOn,d=e.showErrorMessage,c=a.self.options,g=c.loop;e.ready?("single"===n||1===h||1===s&&"left"===l||s===h&&"right"===l)&&!1===u&&("image"===r||"image"!==r&&d)?!1===g?o.css("cursor","default"):o.css("cursor","pointer"):u?o.css("cursor","move"):"image"===r||"image"!==r&&d?o.css("cursor","pointer"):o.css("cursor","auto"):o.css("cursor","default"),t&&t.preventDefault()},setNextQueue:function(){var e=this.$lightbox,i=[t.proxy(this.queueSlideUpHeader,this),t.proxy(this.queueHideContent,this),t.proxy(this.queueLoadContent,this),t.proxy(this.queueResizeLightbox,this),t.proxy(this.queueCenterContent,this),t.proxy(this.queueShowContent,this),t.proxy(this.queueSlideDownHeader,this)];e.queueContainer.next.queue("lightboxNext",i)},setOpenQueue:function(){var e=this.$lightbox,i=[t.proxy(this.queueShowOverlay,this),t.proxy(this.queueCenterLightbox,this),t.proxy(this.queueLoadContent,this),t.proxy(this.queueResizeLightbox,this),t.proxy(this.queueCenterContent,this),t.proxy(this.queueShowContent,this),t.proxy(this.queueSlideDownHeader,this)];e.queueContainer.open.queue("lightboxOpen",i)},setReferences:function(){var e=this.$lightbox;e.root=t("#ui-lightbox"),e.panoramaIcon=e.root.find("#ui-lightbox-panorama-icon"),e.contentContainer=e.root.find("#ui-lightbox-content-container"),e.content=e.contentContainer.find("#ui-lightbox-content"),e.arrow=e.contentContainer.find("#ui-lightbox-arrow"),e.header=e.root.find("#ui-lightbox-bottombar"),e.headerWrapper=e.header.find("#ui-lightbox-title-wrapper"),e.overlay=t("#ui-lightbox-overlay"),e.next=e.root.find("#ui-lightbox-button-next"),e.prev=e.root.find("#ui-lightbox-button-prev"),e.controlButtons=e.next.add(e.prev),e.close=e.root.find("#ui-lightbox-button-close"),e.counter=e.root.find("#ui-lightbox-counter"),e.title=e.root.find("#ui-lightbox-title"),e.map=t("#ui-lightbox-map"),e.viewport=e.map.children().eq(0),e.queueContainer={open:t({}),next:t({})}},showArrow:function(t){var e=this.data,i=this.$lightbox,o=i.arrow,n=e.showErrorMessage,a=e.side,r=e.currentElementNumber,h=e.totalElementsNumber,s=e.currentSetElement.self.options.loop;e.ready&&"single"!==e.currentSet&&("image"===e.currentSetElement.type||n)&&!1===e.panoramaOn&&("left"===a&&(r>1||s)?o.show().removeClass("ui-lightbox-arrow-next ui-corner-left").addClass("ui-lightbox-arrow-prev ui-corner-right").find("span").removeClass("ui-icon-carat-1-e").addClass("ui-icon-carat-1-w"):"right"===a&&(r<h||s)?o.show().removeClass("ui-lightbox-arrow-prev ui-corner-right").addClass("ui-lightbox-arrow-next ui-corner-left").find("span").removeClass("ui-icon-carat-1-w").addClass("ui-icon-carat-1-e"):this.hideArrow()),t&&t.preventDefault()},showErrorMessage:function(){var e,i,o,n=this.data,a=this.$lightbox,r=this,h=n.currentSetElement,s=h.self.options,l=n.currentElementNumber,u=s.errorMessage,d=s.againButtonLabel,c=s.rejectButtonLabel,g=n.htmlErrorScreen,p=n.errorScreenSize,m=p.width,b=p.height;g=r.replaceHtmlPatterns(g,{message:u,labelAgain:d,labelReject:c}),o=t(g),e=o.find("#ui-lightbox-error-footer-again"),i=o.find("#ui-lightbox-error-footer-reject"),e.click(function(){r.navigationGoToElement(l)}).hover(function(){t(this).toggleClass("ui-state-hover")}),i.click(function(){r.removeSetElement(l)}).hover(function(){t(this).toggleClass("ui-state-hover")}),a.content.empty().append(o).find("#ui-lightbox-error").width(m).height(b).end().children().hide(),n.showErrorMessage=!0},updateCounter:function(){var t,e,i,o=this.data,n=this.$lightbox,a=o.currentSetElement,r=a.self.options;"single"!==o.currentSet?(t=o.currentElementNumber,e=o.totalElementsNumber):(t=1,e=1),i=t+r.counterDelimiter+e,n.counter.text(i)},updateTitle:function(){var t=this.data,e=this.$lightbox,i=t.currentSetElement;""!==i.title?e.title.empty().append(i.title):e.title.append("&nbsp;")},updateTitleWidth:function(){var t=this.$lightbox;t.header.width(t.content.width()-12)},queueHideContent:function(e){var i=this.data,o=this.$lightbox,n=i.currentSetElement,a=n.self.options;o.content.children().fadeOut(a.animationSpeed,function(){t(this).remove(),e()}),o.panoramaIcon.hide().removeClass("ui-lightbox-panorama-icon-expand ui-lightbox-panorama-icon-shrink"),i.panoramaOn=!1,this.panoramaHideMap()},queueShowOverlay:function(t){var e=this.data,i=this.$lightbox,o=e.currentSetElement.self;e.ready=!1,this.setCursor(),i.overlay.fadeIn(o.options.animationSpeed,t)},queueCenterLightbox:function(t){var e=this.$lightbox,i=e.root,o=this.getWindowSize("width"),n=this.getWindowSize("height"),a=i.outerWidth(),r=i.outerHeight();i.css({left:Math.round((o-a)/2)+"px",top:Math.round((n-r)/2)+"px"}).show(0,t)},queueLoadContent:function(e){var i,o=this.data,n=o.currentSetElement;switch(o.showErrorMessage=!1,n.type){case"image":i="loadContentImage";break;case"youtube":i="loadContentYoutube";break;case"vimeo":i="loadContentVimeo";break;case"flash":i="loadContentFlash"}t.when(this[i](n.url)).then(function(){e()})},queueResizeLightbox:function(e){var i,o,n,a,r,h,s,l=this.data,u=this.$lightbox,d=l.lightboxPadding,c=l.headerHeight,g=l.currentSetElement,p=g.self.options,m=l.showErrorMessage,b=l.errorScreenSize,x=b.width,v=b.height,f=l.minimalLightboxSize;f.width,f.height;i=p.animationSpeed,"image"===g.type&&!1===m?(o=this.getSizes(),n=o.imageTargetWidth,a=o.imageTargetHeight,r=o.lightboxTargetWidth,h=o.lightboxTargetHeight,s=u.content.find("img"),g.currentWidth=n,g.currentHeight=a,s.width(n).height(a),i=t.isFunction(e)?p.animationSpeed:0):"youtube"!==g.type&&"vimeo"!==g.type||!1!==m?"flash"===g.type&&!1===m?(r=this.getOptimalSize("width",g.width),h=this.getOptimalSize("height",g.height)):m&&(i=0,r=x,h=v):(r=this.checkMinimalSize("width",g.width),h=this.checkMinimalSize("height",g.height)),u.root.find("#ui-lightbox-content").animate({width:r},i).animate({height:h},i).end().animate({left:(this.getWindowSize("width")-r-d)/2},i).animate({top:(this.getWindowSize("height")-h-d-c)/2},i,e)},queueCenterContent:function(t){var e=this.$lightbox,i=e.content,o=i.children();i.children().css({top:i.height()/2-o.outerHeight()/2,left:i.width()/2-o.outerWidth()/2}),t&&t()},queueShowContent:function(t){var e=this.data,i=this.$lightbox,o=this,n=e.currentSetElement,a=n.self.options,r=e.showErrorMessage;i.content.children().fadeIn(a.animationSpeed,function(){"image"===n.type&&!1===r&&o.panoramaCheckAvailability(),t()})},queueSlideDownHeader:function(t){var e=this.data,i=this.$lightbox,o=e.currentSetElement.self.options;i.header.slideDown(o.animationSpeed,t),this.updateCounter(),this.updateTitleWidth(),this.updateTitle(),this.checkButtonsState(),e.ready=!0,this.setCursor(),this.showArrow()},queueSlideUpHeader:function(t){var e=this.data,i=this.$lightbox,o=e.currentSetElement,n=o.self.options;e.ready=!1,this.hideArrow(),this.setCursor(),i.header.slideUp(n.animationSpeed,t)},$lightbox:{},sets:{},data:{minimalLightboxSize:{width:300,height:300},lightboxPadding:12,headerHeight:57,ready:!1,panoramaOn:!1,mapSize:{width:150,height:100},providers:{vimeo:"http://www.vimeo.com/api/oembed.json?callback=?",youtube:"http://gdata.youtube.com/feeds/api/videos/"},showErrorMessage:!1,currentSetElement:{},enablePanorama:!1,errorScreenSize:{width:500,height:500},htmlFlash:"<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000' width='{width}' height='{height}'><param name='movie' value='{url}' />\x3c!--[if !IE]>--\x3e<object type='application/x-shockwave-flash' data='{url}' width='{width}' height='{height}'>\x3c!--<![endif]--\x3e\x3c!--[if !IE]>--\x3e</object>\x3c!--<![endif]--\x3e</object>",htmlErrorScreen:"<div id='ui-lightbox-error'><div id='ui-lightbox-error-message' class='ui-lightbox-error-icon-sign'>{message}</div><div id='ui-lightbox-error-footer'><button aria-disabled='false' role='button' id='ui-lightbox-error-footer-again' class='ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary'><span class='ui-button-icon-primary ui-icon ui-icon-refresh'></span><span class='ui-button-text'>{labelAgain}</span></button><button aria-disabled='false' role='button' id='ui-lightbox-error-footer-reject' class='ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary'><span class='ui-button-icon-primary ui-icon ui-icon-trash'></span><span class='ui-button-text'>{labelReject}</span></button></div></div>",htmlYoutube:"<iframe class='youtube-player' type='text/html' width='{width}' height='{height}' src='http://www.youtube.com/embed/{url}' frameborder='0'></iframe>",htmlLightbox:"<div id='ui-lightbox' class='ui-widget ui-widget-content ui-corner-all' style='display: none'><div id='ui-lightbox-content-container'><div id='ui-lightbox-content' class='ui-widget-content'></div><a id='ui-lightbox-arrow' class='ui-widget-header' style='display: none'><span class='ui-icon'>go</span></a></div><div id='ui-lightbox-bottombar' class='ui-widget-header ui-corner-all' style='display: none'><p id='ui-lightbox-title-wrapper'><span id='ui-lightbox-title'></span></p><p id='ui-lightbox-bottombar-bottom'><a id='ui-lightbox-button-prev' class='ui-lightbox-button'><span class='ui-icon ui-icon-circle-arrow-w'>prev</span></a><span id='ui-lightbox-counter'></span><a id='ui-lightbox-button-next' class='ui-lightbox-button'><span class='ui-icon ui-icon-circle-arrow-e'>next</span></a></p><a id='ui-lightbox-button-close' class='ui-lightbox-button'><span class='ui-icon ui-icon-closethick'>close</span></a><div id='ui-lightbox-panorama-icon' style='display: none'></div></div></div>",htmlMap:"<div id='ui-lightbox-map' style='display: none'><div id='ui-lightbox-map-viewport'></div></div>",htmlOverlay:"<div id='ui-lightbox-overlay' class='ui-widget-overlay' style='display: none'></div>"}}})}(jQuery);